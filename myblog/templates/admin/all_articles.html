{% extends 'admin/admin_base.html' %}
{% block content %}
    <ul class="movie-list">
        <!-- 循环输出电影记录 -->
        {% for article in articles %}
            <li>
                <span class="layui-badge layui-bg-cyan">{{ article.category.name }}</span>{{ article.title }}
                <span class="float-right">
                    {{ article.timestamp }}
{#            {% if current_user.is_authenticated %}#}
                    <!-- 以下两个按钮都在article的遍历中，所以可以获得article.id，在这个 if 语句中，判断当前用户登录状态，来是否显示这个两个按钮 -->
                    <!-- 电影记录删除按钮 -->
                <form action=" {{ url_for('delete_article', article_id=article.id) }} " method="post"
                      class="inline-form">
                <input type="submit" name="delete" value="Delete" onclick=" return confirm('Are you sure ?')"
                       class="btn">
            </form>
                    <!-- 电影记录编辑按钮 -->
                <a class="btn" href=" {{ url_for('edit_article', article_id=article.id) }} ">Edit</a>
{#            {% endif %}#}
        </span>
            </li>
        {% endfor %}
    </ul>
{% import 'pagination.html' as pg %}
{{ pg.my_paginate(pagination, 'all_articles') }}
    {#<table class="layui-table layui-hide" lay-even lay-size="lg" id="demo">#}
    {#    <colgroup>#}
    {#        <col width="100">#}
    {#        <col width="200">#}
    {#        <col width="200">#}
    {#        <col width="400">#}
    {#    </colgroup>#}
    {#    <thead>#}
    {#    <tr>#}
    {#        <th>id</th>#}
    {#        <th>标题</th>#}
    {#        <th>日期</th>#}
    {#        <th>内容</th>#}
    {#    </tr>#}
    {#    </thead>#}
    {#    <tbody>#}
    {#    <tr>#}
    {#        <td>贤心</td>#}
    {#        <td>2016-11-29</td>#}
    {#        <td>人生就像是一场修行</td>#}
    {#        <td>人生就像是一场修行</td>#}
    {#    </tr>#}
    {#    <tr>#}
    {#        <td>许闲心</td>#}
    {#        <td>2016-11-28</td>#}
    {#        <td>2016-11-28</td>#}
    {#        <td>2016-11-28</td>#}
    {#    </tr>#}
    {#    </tbody>#}
    {#</table>#}
    {#<script type="text/html" id="barDemo">#}
    {#  <a class="layui-btn layui-btn-primary layui-btn-xs" lay-event="detail">查看</a>#}
    {#  <a class="layui-btn layui-btn-xs" lay-event="edit">编辑</a>#}
    {#  <a class="layui-btn layui-btn-danger layui-btn-xs" lay-event="del">删除</a>#}
    {#</script>#}

    <script src="../../static/js/jquery-3.5.1.min.js"></script>
    <script src="../../static/editormd/editormd.js"></script>
    {#<script src="../../static/layui/layui.all.js"></script>#}
    <script type="text/javascript">
        $(function () {
            editormd("fancy-editormd", {
                // width: "100%", 请不要添加
                height: 640,
                syncScrolling: "single",
                path: "../../static/editormd/lib/",
                saveHTMLToTextarea: true
            });
        });
    </script>

    <script>
        //Demo
        layui.use('form', function () {
            var form = layui.form;

            //监听提交
            form.on('submit(formDemo)', function (data) {
                layer.msg(JSON.stringify(data.field));
                return false;
            });
        });
    </script>
    {#<button>delete</button>#}
    {#<a href="#">edit</a>#}
{% endblock %}